<svg id="mermaidChart335" xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 1189.25 654" style="max-width:1189.25px;"><style type="text/css" title="mermaid-svg-internal-css">/*  */
#mermaidChart335 .node&gt;rect { ; }
#mermaidChart335 .node text  { fill:#000; stroke:none; font-weight:300; font-family:"Helvetica Neue",Helvetica,Arial,sans-serf; font-size:14px; }
#mermaidChart335 .edgeLabel text  { fill:#000; stroke:none; font-weight:300; font-family:"Helvetica Neue",Helvetica,Arial,sans-serf; font-size:14px; }
#mermaidChart335 .cluster rect  { rx:4px; fill: rgb(255, 255, 222); rx: 4px; stroke: rgb(170, 170, 51); stroke-width: 1px; }
*, ::before, ::after { box-sizing: inherit;}
.mermaid .label { color: rgb(51, 51, 51);}
.node rect, .node circle, .node polygon { fill: rgb(236, 236, 255); stroke: rgb(204, 204, 255); stroke-width: 1px;}
.edgePath .path { stroke: rgb(51, 51, 51);}
/*  */
</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M728.5,62L728.5,87L728.5,112" marker-end="url(#arrowhead16181)" style="fill:none"></path><defs><marker id="arrowhead16181" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M698.5,136.90106007067138L374.75,179L374.75,204" marker-end="url(#arrowhead16182)" style="fill:none"></path><defs><marker id="arrowhead16182" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M374.75,246L374.75,271L553.5,310.770253929867" marker-end="url(#arrowhead16183)" style="fill:none"></path><defs><marker id="arrowhead16183" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M701.2228260869565,154L668.75,179L668.75,204" marker-end="url(#arrowhead16184)" style="fill:none"></path><defs><marker id="arrowhead16184" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M668.75,246L668.75,271L609.5,302.2378223495702" marker-end="url(#arrowhead16185)" style="fill:none"></path><defs><marker id="arrowhead16185" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M758.5,138.1830985915493L994.75,179L994.75,204" marker-end="url(#arrowhead16186)" style="fill:none"></path><defs><marker id="arrowhead16186" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M553.5,320.4300932090546L206,363L206,388" marker-end="url(#arrowhead16187)" style="fill:none"></path><defs><marker id="arrowhead16187" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M206,430L206,455L206,480" marker-end="url(#arrowhead16188)" style="fill:none"></path><defs><marker id="arrowhead16188" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M161.0326086956522,522L107.5,547L107.5,572" marker-end="url(#arrowhead16189)" style="fill:none"></path><defs><marker id="arrowhead16189" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M280.07065217391306,522L368.25,547L368.25,572" marker-end="url(#arrowhead16190)" style="fill:none"></path><defs><marker id="arrowhead16190" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M553.5,327.42914979757086L458,363L458,388" marker-end="url(#arrowhead16191)" style="fill:none"></path><defs><marker id="arrowhead16191" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M458,430L458,455L458,480" marker-end="url(#arrowhead16192)" style="fill:none"></path><defs><marker id="arrowhead16192" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M609.5,327.42914979757086L705,363L705,388" marker-end="url(#arrowhead16193)" style="fill:none"></path><defs><marker id="arrowhead16193" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M705,430L705,455L705,480" marker-end="url(#arrowhead16194)" style="fill:none"></path><defs><marker id="arrowhead16194" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M705,522L705,547L705,572" marker-end="url(#arrowhead16195)" style="fill:none"></path><defs><marker id="arrowhead16195" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M609.5,320.41644562334216L958.5,363L958.5,388" marker-end="url(#arrowhead16196)" style="fill:none"></path><defs><marker id="arrowhead16196" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="main" transform="translate(728.5,41)" style="opacity: 1;"><rect rx="0" ry="0" x="-26.5" y="-21" width="53" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-16.5,-11)"><foreignObject width="33" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">main</div></foreignObject></g></g></g><g class="node" id="router" transform="translate(728.5,133)" style="opacity: 1;"><rect rx="0" ry="0" x="-30" y="-21" width="60" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-20,-11)"><foreignObject width="40" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">router</div></foreignObject></g></g></g><g class="node" id="srv" transform="translate(374.75,225)" style="opacity: 1;"><rect rx="0" ry="0" x="-122.5" y="-21" width="245" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-112.5,-11)"><foreignObject width="225" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Proxy (http.Server + TCP Listener)</div></foreignObject></g></g></g><g class="node" id="proxy" transform="translate(581.5,317)" style="opacity: 1;"><rect rx="0" ry="0" x="-28" y="-21" width="56" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18,-11)"><foreignObject width="36" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">proxy</div></foreignObject></g></g></g><g class="node" id="srv2" transform="translate(668.75,225)" style="opacity: 1;"><rect rx="0" ry="0" x="-121.5" y="-21" width="243" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-111.5,-11)"><foreignObject width="223" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Proxy (http.Server + TLS Listener)</div></foreignObject></g></g></g><g class="node" id="srv3" transform="translate(994.75,225)" style="opacity: 1;"><rect rx="0" ry="0" x="-154.5" y="-21" width="309" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-144.5,-11)"><foreignObject width="289" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Varz/Routes/Health endpoints (http.Server)</div></foreignObject></g></g></g><g class="node" id="lookup" transform="translate(206,409)" style="opacity: 1;"><rect rx="0" ry="0" x="-91" y="-21" width="182" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-81,-11)"><foreignObject width="162" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Lookup Negroni Handler</div></foreignObject></g></g></g><g class="node" id="rr" transform="translate(206,501)" style="opacity: 1;"><rect rx="0" ry="0" x="-90.5" y="-21" width="181" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-80.5,-11)"><foreignObject width="161" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Route Registry (registry)</div></foreignObject></g></g></g><g class="node" id="ns" transform="translate(107.5,593)" style="opacity: 1;"><rect rx="0" ry="0" x="-87.5" y="-21" width="175" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-77.5,-11)"><foreignObject width="155" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">nats-subscriber (mbus)</div></foreignObject></g></g></g><g class="node" id="rf" transform="translate(368.25,593)" style="opacity: 1;"><rect rx="0" ry="0" x="-59.5" y="-21" width="119" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-49.5,-11)"><foreignObject width="99" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">(route_fetcher)</div></foreignObject></g></g></g><g class="node" id="rs" transform="translate(458,409)" style="opacity: 1;"><rect rx="0" ry="0" x="-111" y="-21" width="222" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-101,-11)"><foreignObject width="202" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Route service Negroni Handler</div></foreignObject></g></g></g><g class="node" id="routeservice" transform="translate(458,501)" style="opacity: 1;"><rect rx="0" ry="0" x="-51" y="-21" width="102" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-41,-11)"><foreignObject width="82" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">routeservice</div></foreignObject></g></g></g><g class="node" id="httputil.ReverseProxy" transform="translate(705,409)" style="opacity: 1;"><rect rx="0" ry="0" x="-80.5" y="-21" width="161" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-70.5,-11)"><foreignObject width="141" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">httputil.ReverseProxy</div></foreignObject></g></g></g><g class="node" id="prt" transform="translate(705,501)" style="opacity: 1;"><rect rx="0" ry="0" x="-146" y="-21" width="292" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-136,-11)"><foreignObject width="272" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">ProxyRoundTripper (proxy/round_tripper)</div></foreignObject></g></g></g><g class="node" id="be" transform="translate(705,593)" style="opacity: 1;"><rect rx="0" ry="0" x="-65" y="-21" width="130" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-55,-11)"><foreignObject width="110" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">All the backends</div></foreignObject></g></g></g><g class="node" id="nh" transform="translate(958.5,409)" style="opacity: 1;"><rect rx="0" ry="0" x="-123" y="-21" width="246" height="42"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-113,-11)"><foreignObject width="226" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Other negroni Handlers (handlers)</div></foreignObject></g></g></g></g></g></g></svg>